<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-03-15">

<title>agrotech lab - Electronics Class</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//archive/images/favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/iconify-1.0.0-beta.2/iconify-icon.min.js"></script>
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../custom.scss">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../archive/images/site-logo-white.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">agrotech lab</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text"><iconify-icon inline="" icon="bi:exclamation-diamond-fill"></iconify-icon> About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../schedule.html">
 <span class="menu-text"><iconify-icon inline="" icon="material-symbols:calendar-month-sharp"></iconify-icon> Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutorials.html">
 <span class="menu-text"><iconify-icon inline="" icon="fa6-solid:user-graduate"></iconify-icon> Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html">
 <span class="menu-text"><iconify-icon inline="" icon="fluent:brain-circuit-20-regular"></iconify-icon> Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html">
 <span class="menu-text"><iconify-icon inline="" icon="material-symbols:rocket-launch"></iconify-icon> Projects</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Electronics Class</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">arduino</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 15, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">
<script src="https://code.iconify.design/iconify-icon/1.0.1/iconify-icon.min.js"></script>




<p><img src="https://cdn.sparkfun.com/assets/6/e/8/3/c/51f93d85757b7f2049270817.png" class="img-fluid"></p>
<section id="presentation" class="level3">
<h3 class="anchored" data-anchor-id="presentation">Presentation</h3>
<p><a href="../../archive/teaching-material/electronics-class.pptx">Download .pptx <span class="iconify" data-icon="el:download-alt"></span></a></p>
<object data="/archive/teaching-material/electronics-class.pdf" width="800" height="500" type="application/pdf">
</object>
<p><a href="https://randomnerdtutorials.com/esp32-pinout-reference-gpios/">Pin information for ESP32</a></p>
<hr>
<!-- ---
title: ""
echo: false
jupyter: python3
section-divs: false
--- -->
</section>
<section id="digital-write" class="level3">
<h3 class="anchored" data-anchor-id="digital-write">Digital Write</h3>
<p>Use the following code to activate LED pin.</p>
<button class="btn btn-outline-dark  rounded" type="button" data-bs-toggle="collapse" data-bs-target="#digital-write" aria-expanded="false" aria-controls="digital-write">
    <i class="bi bi-toggles"></i> Toggle code
    </button>
     <a class="btn btn-outline-dark rounded" ,="" href="../../archive/code/digital-write.ino" target="_blank" rel="noopener noreferrer">
        <i class="bi bi-download"></i> Download code
    </a>

            <div class="collapse" id="digital-write">
            <div class="card card-body border-0">
        
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1"></a><span class="dt">int</span> LED_pin <span class="op">=</span> <span class="dv">13</span><span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co">// the setup function runs once when you press reset or power the board</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="co">// initialize digital pin LED_pin as an output.</span></span>
<span id="cb1-6"><a href="#cb1-6"></a>  pinMode<span class="op">(</span>LED_pin<span class="op">,</span> OUTPUT<span class="op">);</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="op">}</span></span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co">// the loop function runs over and over again forever</span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>  digitalWrite<span class="op">(</span>LED_pin<span class="op">,</span> HIGH<span class="op">);</span>   <span class="co">// turn the LED on (HIGH is the voltage level)</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>  delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span>                       <span class="co">// wait for a second</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>  digitalWrite<span class="op">(</span>LED_pin<span class="op">,</span> LOW<span class="op">);</span>    <span class="co">// turn the LED off by making the voltage LOW</span></span>
<span id="cb1-14"><a href="#cb1-14"></a>  delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span>                       <span class="co">// wait for a second</span></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

            </div>
            </div>
            
</section>
<section id="pwm-with-esp32" class="level3">
<h3 class="anchored" data-anchor-id="pwm-with-esp32">PWM with ESP32</h3>
<p>Pulse-width modulation (PWM) is a method of controlling the average power delivered by an electrical signal. The average value of voltage (and current) fed to the load is controlled by switching the supply between 0 and 100% at a rate faster than it takes the load to change significantly. <strong>PWM is a technique for getting analog results with digital means.</strong> Digital control is used to create a square wave, a signal switched between on and off. This on-off pattern can simulate voltages in between the full Vcc of the board and off by changing the portion of time the signal spends on versus the time that the signal spends off. PWM is used in many applications such as controlling motor speed, heat output of heaters and variable speed fan controllers.</p>
<p><img src="https://cdn.sparkfun.com/assets/f/9/c/8/a/512e869bce395fbc64000002.JPG" class="img-fluid"></p>
<p>Use the following code to activate LED pin with PWM.</p>
<button class="btn btn-outline-dark  rounded" type="button" data-bs-toggle="collapse" data-bs-target="#PWM-basic" aria-expanded="false" aria-controls="PWM-basic">
    <i class="bi bi-toggles"></i> Toggle code
    </button>
     <a class="btn btn-outline-dark rounded" ,="" href="../../archive/code/PWM-basic.ino" target="_blank" rel="noopener noreferrer">
        <i class="bi bi-download"></i> Download code
    </a>

            <div class="collapse" id="PWM-basic">
            <div class="card card-body border-0">
        
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">// the number of the LED pin</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="dt">const</span> <span class="dt">int</span> ledPin <span class="op">=</span> <span class="dv">13</span><span class="op">;</span>  <span class="co">// 13 corresponds to GPIO13</span></span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">// setting PWM properties</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="dt">const</span> <span class="dt">int</span> freq <span class="op">=</span> <span class="dv">5000</span><span class="op">;</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="dt">const</span> <span class="dt">int</span> ledChannel <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="dt">const</span> <span class="dt">int</span> resolution <span class="op">=</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8"></a> </span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="dt">void</span> setup<span class="op">(){</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="co">// configure LED PWM functionalitites</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>  ledcSetup<span class="op">(</span>ledChannel<span class="op">,</span> freq<span class="op">,</span> resolution<span class="op">);</span></span>
<span id="cb2-12"><a href="#cb2-12"></a>  </span>
<span id="cb2-13"><a href="#cb2-13"></a>  <span class="co">// attach the channel to the GPIO to be controlled</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>  ledcAttachPin<span class="op">(</span>ledPin<span class="op">,</span> ledChannel<span class="op">);</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="op">}</span></span>
<span id="cb2-16"><a href="#cb2-16"></a> </span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="dt">void</span> loop<span class="op">(){</span></span>
<span id="cb2-18"><a href="#cb2-18"></a>  <span class="co">// increase the LED brightness</span></span>
<span id="cb2-19"><a href="#cb2-19"></a>  <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> dutyCycle <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> dutyCycle <span class="op">&lt;=</span> <span class="dv">255</span><span class="op">;</span> dutyCycle<span class="op">++){</span>   </span>
<span id="cb2-20"><a href="#cb2-20"></a>    <span class="co">// changing the LED brightness with PWM</span></span>
<span id="cb2-21"><a href="#cb2-21"></a>    ledcWrite<span class="op">(</span>ledChannel<span class="op">,</span> dutyCycle<span class="op">);</span></span>
<span id="cb2-22"><a href="#cb2-22"></a>    delay<span class="op">(</span><span class="dv">15</span><span class="op">);</span></span>
<span id="cb2-23"><a href="#cb2-23"></a>  <span class="op">}</span></span>
<span id="cb2-24"><a href="#cb2-24"></a></span>
<span id="cb2-25"><a href="#cb2-25"></a>  <span class="co">// decrease the LED brightness</span></span>
<span id="cb2-26"><a href="#cb2-26"></a>  <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> dutyCycle <span class="op">=</span> <span class="dv">255</span><span class="op">;</span> dutyCycle <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> dutyCycle<span class="op">--){</span></span>
<span id="cb2-27"><a href="#cb2-27"></a>    <span class="co">// changing the LED brightness with PWM</span></span>
<span id="cb2-28"><a href="#cb2-28"></a>    ledcWrite<span class="op">(</span>ledChannel<span class="op">,</span> dutyCycle<span class="op">);</span>   </span>
<span id="cb2-29"><a href="#cb2-29"></a>    delay<span class="op">(</span><span class="dv">15</span><span class="op">);</span></span>
<span id="cb2-30"><a href="#cb2-30"></a>  <span class="op">}</span></span>
<span id="cb2-31"><a href="#cb2-31"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

            </div>
            </div>
            
</section>
<section id="reading-an-analog-pin" class="level3">
<h3 class="anchored" data-anchor-id="reading-an-analog-pin">Reading an Analog Pin</h3>
<p>Use the following code to read an analog pin.</p>
<button class="btn btn-outline-dark  rounded" type="button" data-bs-toggle="collapse" data-bs-target="#analog-read" aria-expanded="false" aria-controls="analog-read">
    <i class="bi bi-toggles"></i> Toggle code
    </button>
     <a class="btn btn-outline-dark rounded" ,="" href="../../archive/code/analog-read.ino" target="_blank" rel="noopener noreferrer">
        <i class="bi bi-download"></i> Download code
    </a>

            <div class="collapse" id="analog-read">
            <div class="card card-body border-0">
        
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1"></a><span class="dt">int</span> analog_pin <span class="op">=</span> <span class="dv">32</span><span class="op">;</span> <span class="co">// Pin into which we connect the input voltage</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="dt">int</span> val <span class="op">;</span>  <span class="co">// variable to store the value read</span></span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>  Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">9600</span><span class="op">);</span> <span class="co">//</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="op">}</span></span>
<span id="cb3-8"><a href="#cb3-8"></a></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>  val <span class="op">=</span> analogRead<span class="op">(</span>analog_pin<span class="op">);</span>  <span class="co">// read the input pin</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>  Serial<span class="op">.</span>println<span class="op">(</span>val<span class="op">);</span>          <span class="co">// print value</span></span>
<span id="cb3-12"><a href="#cb3-12"></a>  delay<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

            </div>
            </div>
            
</section>
<section id="adc-to-voltage" class="level3">
<h3 class="anchored" data-anchor-id="adc-to-voltage">ADC to voltage</h3>
<p>Use the following code to convert ADC reading to voltage.</p>
<button class="btn btn-outline-dark  rounded" type="button" data-bs-toggle="collapse" data-bs-target="#ADC-to-voltage" aria-expanded="false" aria-controls="ADC-to-voltage">
    <i class="bi bi-toggles"></i> Toggle code
    </button>
     <a class="btn btn-outline-dark rounded" ,="" href="../../archive/code/ADC-to-voltage.ino" target="_blank" rel="noopener noreferrer">
        <i class="bi bi-download"></i> Download code
    </a>

            <div class="collapse" id="ADC-to-voltage">
            <div class="card card-body border-0">
        
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1"></a><span class="dt">int</span> analog_pin <span class="op">=</span> <span class="dv">32</span><span class="op">;</span> <span class="co">// Pin into which we connect the input voltage</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="dt">int</span> val <span class="op">;</span>  <span class="co">// variable to store the value read</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="dt">float</span> voltage<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">9600</span><span class="op">);</span> <span class="co">//</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="op">}</span></span>
<span id="cb4-8"><a href="#cb4-8"></a></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>  val <span class="op">=</span> analogRead<span class="op">(</span>analog_pin<span class="op">);</span>  <span class="co">// read the input pin</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>  voltage <span class="op">=</span> <span class="op">(</span><span class="fl">3.3</span><span class="op">/</span><span class="dv">4095</span><span class="op">)*</span>val<span class="op">;</span>  <span class="co">// convert to voltage according to ADC</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>  Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"Voltage: "</span><span class="op">);</span></span>
<span id="cb4-13"><a href="#cb4-13"></a>  Serial<span class="op">.</span>print<span class="op">(</span>voltage<span class="op">);</span>          <span class="co">// print value</span></span>
<span id="cb4-14"><a href="#cb4-14"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">" V"</span><span class="op">);</span></span>
<span id="cb4-15"><a href="#cb4-15"></a>  delay<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

            </div>
            </div>
            
</section>
<section id="potentiometer-and-pwm" class="level3">
<h3 class="anchored" data-anchor-id="potentiometer-and-pwm">Potentiometer and PWM</h3>
<p>Use the following code to control PWM with potentiometer and dim the LED.</p>
<button class="btn btn-outline-dark  rounded" type="button" data-bs-toggle="collapse" data-bs-target="#potentiometer-PWM" aria-expanded="false" aria-controls="potentiometer-PWM">
    <i class="bi bi-toggles"></i> Toggle code
    </button>
     <a class="btn btn-outline-dark rounded" ,="" href="../../archive/code/potentiometer-PWM.ino" target="_blank" rel="noopener noreferrer">
        <i class="bi bi-download"></i> Download code
    </a>

            <div class="collapse" id="potentiometer-PWM">
            <div class="card card-body border-0">
        
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb5-1"><a href="#cb5-1"></a><span class="co">// the number of the LED pin</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="dt">const</span> <span class="dt">int</span> ledPin <span class="op">=</span> <span class="dv">13</span><span class="op">;</span>  <span class="co">// 13 corresponds to GPIO13</span></span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="dt">int</span> analog_pin <span class="op">=</span> <span class="dv">32</span><span class="op">;</span> <span class="co">// Pin into which we connect the input voltage</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="dt">int</span> val <span class="op">;</span>  <span class="co">// variable to store the value read</span></span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">// setting PWM properties</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="dt">const</span> <span class="dt">int</span> freq <span class="op">=</span> <span class="dv">5000</span><span class="op">;</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="dt">const</span> <span class="dt">int</span> ledChannel <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="dt">const</span> <span class="dt">int</span> resolution <span class="op">=</span> <span class="dv">12</span><span class="op">;</span></span>
<span id="cb5-11"><a href="#cb5-11"></a> </span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="dt">void</span> setup<span class="op">(){</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>  Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">9600</span><span class="op">);</span></span>
<span id="cb5-14"><a href="#cb5-14"></a>    </span>
<span id="cb5-15"><a href="#cb5-15"></a>  <span class="co">// configure LED PWM functionalitites</span></span>
<span id="cb5-16"><a href="#cb5-16"></a>  ledcSetup<span class="op">(</span>ledChannel<span class="op">,</span> freq<span class="op">,</span> resolution<span class="op">);</span></span>
<span id="cb5-17"><a href="#cb5-17"></a>  </span>
<span id="cb5-18"><a href="#cb5-18"></a>  <span class="co">// attach the channel to the GPIO to be controlled</span></span>
<span id="cb5-19"><a href="#cb5-19"></a>  ledcAttachPin<span class="op">(</span>ledPin<span class="op">,</span> ledChannel<span class="op">);</span></span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="op">}</span></span>
<span id="cb5-21"><a href="#cb5-21"></a> </span>
<span id="cb5-22"><a href="#cb5-22"></a><span class="dt">void</span> loop<span class="op">(){</span></span>
<span id="cb5-23"><a href="#cb5-23"></a>    val <span class="op">=</span> analogRead<span class="op">(</span>analog_pin<span class="op">);</span>  <span class="co">// read the input pin</span></span>
<span id="cb5-24"><a href="#cb5-24"></a>    Serial<span class="op">.</span>println<span class="op">(</span>val<span class="op">);</span>          <span class="co">// print value</span></span>
<span id="cb5-25"><a href="#cb5-25"></a>    ledcWrite<span class="op">(</span>ledChannel<span class="op">,</span> val<span class="op">);</span></span>
<span id="cb5-26"><a href="#cb5-26"></a>    delay<span class="op">(</span><span class="dv">15</span><span class="op">);</span></span>
<span id="cb5-27"><a href="#cb5-27"></a>  <span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

            </div>
            </div>
            
</section>
<section id="thermistor" class="level3">
<h3 class="anchored" data-anchor-id="thermistor">Thermistor</h3>
<p><a href="../../archive/teaching-material/thermistor-datasheet-NTCM-10K-B4150.pdf">Download Data Sheet</a></p>
<button class="btn btn-outline-dark  rounded" type="button" data-bs-toggle="collapse" data-bs-target="#thermistor_b_val" aria-expanded="false" aria-controls="thermistor_b_val">
    <i class="bi bi-toggles"></i> Toggle code
    </button>
     <a class="btn btn-outline-dark rounded" ,="" href="../../archive/code/thermistor_b_val.ino" target="_blank" rel="noopener noreferrer">
        <i class="bi bi-download"></i> Download code
    </a>

            <div class="collapse" id="thermistor_b_val">
            <div class="card card-body border-0">
        
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb6-1"><a href="#cb6-1"></a><span class="co">// Thermistor </span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">// reading the temperature via the ESP32's ADC</span></span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="dt">int</span> analog_pin <span class="op">=</span> <span class="dv">32</span><span class="op">;</span> <span class="co">// Pin into which we connect the input voltage</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="dt">int</span> val <span class="op">;</span>  <span class="co">// variable to store the value read</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="dt">float</span> v2<span class="op">;</span> <span class="co">// variable to store the voltage of v2</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="dt">int</span> r1 <span class="op">=</span> <span class="dv">10000</span><span class="op">;</span> <span class="co">// R1 value (in the voltage divider)</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="dt">float</span> v1 <span class="op">=</span> <span class="fl">3.3</span><span class="op">;</span> <span class="co">// V1 value</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="dt">int</span> b_val <span class="op">=</span> <span class="dv">4150</span><span class="op">;</span> <span class="co">// B value of the resistor (from the data sheet)</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="dt">float</span> r2<span class="op">;</span> <span class="co">// variable to store the resistance of r2 (thermistor resistance)</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="dt">float</span> t<span class="op">;</span> <span class="co">// variable to store the temperature</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="dt">int</span> adc_steps <span class="op">=</span> <span class="dv">4095</span><span class="op">;</span> <span class="co">// the number of increments our ADC has (ESP32 = 12bit)</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="dt">float</span> r_25 <span class="op">=</span> <span class="dv">10000</span><span class="op">;</span> <span class="co">// the thermistor resistance at 25C (from the data sheet)</span></span>
<span id="cb6-14"><a href="#cb6-14"></a></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co">// function to convert resistance to temperature according to the b value</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co">// equation in this link:</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="co">// https://www.thinksrs.com/downloads/programs/therm%20calc/ntccalibrator/ntccalculator.html</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="dt">float</span> resistance_to_temperature<span class="op">(</span><span class="dt">int</span> b<span class="op">,</span> <span class="dt">float</span> r<span class="op">,</span> <span class="dt">float</span> r_25<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-19"><a href="#cb6-19"></a>  <span class="cf">return</span> b<span class="op">/(</span>log<span class="op">(</span>r<span class="op">/</span>r_25<span class="op">)+(</span>b<span class="op">/</span><span class="fl">298.15</span><span class="op">))-</span><span class="fl">273.15</span><span class="op">;</span></span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="op">}</span></span>
<span id="cb6-21"><a href="#cb6-21"></a></span>
<span id="cb6-22"><a href="#cb6-22"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-23"><a href="#cb6-23"></a>  Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">9600</span><span class="op">);</span> <span class="co">//</span></span>
<span id="cb6-24"><a href="#cb6-24"></a><span class="op">}</span></span>
<span id="cb6-25"><a href="#cb6-25"></a></span>
<span id="cb6-26"><a href="#cb6-26"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-27"><a href="#cb6-27"></a>  val <span class="op">=</span> analogRead<span class="op">(</span>analog_pin<span class="op">);</span>  <span class="co">// read the input pin (reading v2)</span></span>
<span id="cb6-28"><a href="#cb6-28"></a>  v2 <span class="op">=</span> <span class="op">(</span>v1<span class="op">/</span>adc_steps<span class="op">)*</span>val<span class="op">;</span>  <span class="co">// convert to voltage of v2 according to ADC</span></span>
<span id="cb6-29"><a href="#cb6-29"></a>  r2 <span class="op">=</span> <span class="op">(</span>v2<span class="op">*</span>r1<span class="op">)/(</span>v1<span class="op">-</span>v2<span class="op">);</span></span>
<span id="cb6-30"><a href="#cb6-30"></a>  t <span class="op">=</span> resistance_to_temperature<span class="op">(</span>b_val<span class="op">,</span> r2<span class="op">,</span> r_25<span class="op">);</span></span>
<span id="cb6-31"><a href="#cb6-31"></a>  Serial<span class="op">.</span>print<span class="op">(</span><span class="st">"Temperature: "</span><span class="op">);</span></span>
<span id="cb6-32"><a href="#cb6-32"></a>  Serial<span class="op">.</span>print<span class="op">(</span>t<span class="op">);</span>          <span class="co">// print temperature</span></span>
<span id="cb6-33"><a href="#cb6-33"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">" C"</span><span class="op">);</span></span>
<span id="cb6-34"><a href="#cb6-34"></a>  delay<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="cb6-35"><a href="#cb6-35"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

            </div>
            </div>
            
<p><img src="../../archive/figures/thermistor-agrotech-schematic.png" class="img-fluid"></p>
<p><img src="../../archive/figures/thermistor-agrotech-breadboard.png" class="img-fluid"></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>